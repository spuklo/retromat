(function(t){function e(e){for(var s,n,l=e[0],i=e[1],c=e[2],u=0,f=[];u<l.length;u++)n=l[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&f.push(o[n][0]),o[n]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,l=1;l<a.length;l++){var i=a[l];0!==o[i]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},o={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=i;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),o=a.n(s);o.a},1587:function(t,e,a){"use strict";var s=a("f363"),o=a.n(s);o.a},"2d7d":function(t,e,a){},"2ea6":function(t,e,a){"use strict";var s=a("78f8"),o=a.n(s);o.a},"35d5":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("SafetyCheck"),a("el-container",[a("el-header",[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"el-col-center",attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("Stats")],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("AddCard")],1)])],1)],1),a("el-main",[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:11}},[a("CardList",{attrs:{cardType:"POSITIVE"}})],1),a("el-col",{attrs:{span:11}},[a("CardList",{attrs:{cardType:"NEGATIVE"}})],1)],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:11}},[a("CardList",{attrs:{cardType:"OTHER"}})],1),a("el-col",{attrs:{span:11}},[a("CardList",{attrs:{cardType:"ACTION"}})],1)],1)],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tag",{attrs:{type:"info"}},[t._v("Users: "+t._s(t.getStats.sessions))]),a("el-tag",{attrs:{type:"danger"}},[t._v("Min safety level: "+t._s(t.getStats.min_safety))]),a("el-tag",{attrs:{type:"warning"}},[t._v("Avg safety level: "+t._s(t.getStats.avg_safety))]),a("el-tag",{attrs:{type:"info"}},[t._v("Max safety level: "+t._s(t.getStats.max_safety))]),a("el-tag",{attrs:{type:"info"}},[t._v("Votes remaining: "+t._s(t.votesRemaining))])],1)},l=[],i=a("5530"),c=a("2f62"),d={name:"Stats",computed:Object(i["a"])({},Object(c["c"])(["getStats","votesRemaining"]))},u=d,f=(a("743c"),a("2877")),p=Object(f["a"])(u,n,l,!1,null,"732d758d",null),v=p.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"Safety check",visible:t.dialogVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",{staticClass:"longer-text"},[t._v('"Regardless of what we discover, we understand and truly believe that everyone did the best job they could, given what they knew at the time, their skills and abilities, the resources available, and the situation at hand."')]),a("el-form",{model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("el-form-item",{attrs:{label:"Safety check"}},[a("el-select",{attrs:{placeholder:"Please specify your safety level"},model:{value:t.form.safetyLevel,callback:function(e){t.$set(t.form,"safetyLevel",e)},expression:"form.safetyLevel"}},[a("el-option",{attrs:{label:"No problem, I'll talk about anything",value:"5"}}),a("el-option",{attrs:{label:"I'll talk about almost anything; a few things may be difficult",value:"4"}}),a("el-option",{attrs:{label:"I'll talk about some things, but others will be hard to say",value:"3"}}),a("el-option",{attrs:{label:"I'm not going to say much, I'll let others bring up issues",value:"2"}}),a("el-option",{attrs:{label:"I'll smile, claim everything is great and agree with managers",value:"1"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.sendSafetyCheck}},[t._v("Confirm")])],1)],1)},b=[],m={name:"SafetyCheck",data:function(){return{dialogVisible:!0,formLabelWidth:"120px",form:{safetyLevel:""}}},methods:{sendSafetyCheck:function(){if(""!=this.form.safetyLevel){var t={type:"SAFETY_LEVEL",body:{level:this.form.safetyLevel}};this.$socket.send(JSON.stringify(t)),this.dialogVisible=!1}}}},h=m,g=(a("8129"),Object(f["a"])(h,y,b,!1,null,"450efaf8",null)),_=g.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v(t._s(t.cardType))]),t._l(t.sortedCards,(function(t){return a("div",{key:t.id,staticClass:"spaced"},[a("CardDetails",{attrs:{card:t}})],1)}))],2)},O=[],w=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v(" "+t._s(t.card.votes)+" "),t.voted?a("i",{staticClass:"el-icon-star-on",on:{dblclick:function(e){return t.toggleVoted(t.card.id)}}}):a("i",{staticClass:"el-icon-star-off",on:{dblclick:t.toggleVoted}}),t._v(" "+t._s(t.card.text)+" ")])}),S=[],x={name:"CardDetails",props:{card:{}},data:function(){return{voted:!1}},methods:Object(i["a"])({},Object(c["b"])(["handleVote"]),{},Object(c["c"])(["votesRemaining"]),{toggleVoted:function(){if(this.votesRemaining()>0||this.voted){this.voted=!this.voted,this.handleVote(this.voted);var t={type:"VOTE",body:{id:this.card.id,vote:this.voted?1:-1}};this.$socket.send(JSON.stringify(t))}}})},E=x,k=Object(f["a"])(E,w,S,!1,null,"336bad20",null),T=k.exports,V={name:"CardList",props:{cardType:String},methods:Object(i["a"])({},Object(c["c"])(["getCards"])),computed:{sortedCards:function(){var t=this,e=this.getCards().filter((function(e){return e.type==t.cardType})),a=e.sort((function(t,e){return t.id-e.id}));return a.sort((function(t,e){return e.votes-t.votes}))}},components:{CardDetails:T}},j=V,I=(a("2ea6"),Object(f["a"])(j,C,O,!1,null,"021335a8",null)),A=I.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{staticClass:"wide",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.dialogVisible=!0}}}),a("el-dialog",{attrs:{title:"New retro card",visible:t.dialogVisible,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{required:"",label:"Card type","label-width":"labelWidth"}},[a("el-select",{attrs:{placeholder:"Card type",prop:"type"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"POSITIVE",value:"POSITIVE"}}),a("el-option",{attrs:{label:"NEGATIVE",value:"NEGATIVE"}}),a("el-option",{attrs:{label:"APPRECIATION",value:"APPRECIATION"}}),a("el-option",{attrs:{label:"IDEA",value:"IDEA"}}),a("el-option",{attrs:{label:"OTHER",value:"OTHER"}}),a("el-option",{attrs:{label:"ACTION",value:"ACTION"}})],1)],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{required:"",label:"Card text","label-width":"labelWidth"}},[a("el-input",{attrs:{placeholder:"I'd like to say..."},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitNewRetroCard}},[t._v("Add")])],1)],1)],1)},R=[],L={name:"AddCard",data:function(){return{labelWidth:"120px",dialogVisible:!1,form:{text:"",type:""}}},methods:{submitNewRetroCard:function(){if(!(""==this.form.type||this.form.text.length<3)){var t={type:"CARD",body:{type:this.form.type,text:this.form.text}};this.$socket.send(JSON.stringify(t)),this.dialogVisible=!1,this.form.text="",this.form.type=""}}}},P=L,$=(a("1587"),Object(f["a"])(P,N,R,!1,null,"8055f880",null)),D=$.exports,M={name:"App",components:{Stats:v,SafetyCheck:_,CardList:A,AddCard:D}},J=M,G=(a("034f"),Object(f["a"])(J,o,r,!1,null,null,null)),W=G.exports;s["default"].use(c["a"]);var H={stats:{sessions:0,safety_levels:0,min_safety:0,max_safety:0,avg_safety:0},cards:[],connected:!1,votes_remaining:5},K={getStats:function(t){return t.stats},votesRemaining:function(t){return t.votes_remaining},getCards:function(t){return t.cards}},U={SOCKET_ONOPEN:function(t){t.connected=!0},SOCKET_ONCLOSE:function(t){t.connected=!1},SOCKET_ONMESSAGE:function(t,e){if(console.log(e),e.data){var a=JSON.parse(e.data);"STATS"==a.type?t.stats=a.body:"RETRO"==a.type?t.cards=a.body.cards:"CARD"==a.type&&(t.cards=t.cards.filter((function(t){return t.id!=a.body.id})),t.cards.push(a.body))}},onUpVote:function(t){t.votes_remaining>0&&(t.votes_remaining-=1)},onDownVote:function(t){t.votes_remaining<5&&(t.votes_remaining+=1)}},q={handleVote:function(t,e){var a=t.commit;a(e?"onUpVote":"onDownVote")}},z=new c["a"].Store({state:H,getters:K,mutations:U,actions:q}),F=a("5c96"),Y=a.n(F),B=(a("0fae"),a("b408")),Q=a.n(B);s["default"].config.productionTip=!1,s["default"].use(Y.a),s["default"].use(Q.a,"ws://"+window.location.host+"/retro",{store:z}),new s["default"]({store:z,render:function(t){return t(W)}}).$mount("#app")},"743c":function(t,e,a){"use strict";var s=a("2d7d"),o=a.n(s);o.a},"78f8":function(t,e,a){},8129:function(t,e,a){"use strict";var s=a("35d5"),o=a.n(s);o.a},"85ec":function(t,e,a){},f363:function(t,e,a){}});
//# sourceMappingURL=app.139e5d2b.js.map